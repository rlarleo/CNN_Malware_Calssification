import os
import pandas as pd
import csv
import shutil
def classification_folder():
    classDir = {'1': 1, '2': 2, '3': 3, '4': 4, '5': 5, '6': 6, '7': 7, '8': 8, '9': 9}
    f1 = open('split_train_Labels.csv', 'r')
    f2 = open('split_test_Labels.csv', 'r')

    currentTrainPath = 'imagesV2/train/malware'  # train 파일이 있는 현재 경로
    currentTestPath = 'imagesV2/val/malware'  # test 파일이 있는 현재 경로

    # 카테고리화 된 폴더가 없으면 폴더 생성
    try:
        for key in classDir.keys():
            os.makedirs(currentTrainPath + f'\\{key}')
    # 이미 존재하면 패스
    except:
        print("no")
        pass
    try:
        for key in classDir.keys():
            os.makedirs(currentTestPath + f'\\{key}')
    # 이미 존재하면 패스
    except:
        print("no")
        pass
    #train 데이터 1~9폴더로 분류
    rdr = csv.reader(f1)
    for line in rdr:
        print(line)
        line[0] = line[0] + '.bytes.jpg'
        targetPath = currentTrainPath + f'\\{line[0]}'
        try:
             shutil.move(targetPath, currentTrainPath+f'\\{line[1]}')
        except:
            pass

    #test 데이터 1~9폴더로 분류
    rdr = csv.reader(f2)
    for line in rdr:
        line[0] = line[0] + '.bytes.jpg'
        targetPath = currentTestPath + f'\\{line[0]}'
        try:
             shutil.move(targetPath, currentTestPath+f'\\{line[1]}')
        except:
            pass
    f1.close()
    f2.close()
