import pandas as pd
import os

def load_labels():
    labels = pd.read_csv('trainLabels.csv')
    return [i for i in labels.Id], [c for c in labels.Class]

#splitting the image data in to train and test split
def splitfolders():
    import splitfolders
    splitfolders.ratio("images",output="images",seed=294,ratio=(0.8,0.2))

def set_label():
    f1 = open("split_train_Labels.csv", "w")
    f2 = open("split_test_Labels.csv", "w")
    f1.write("Id" + ',' + "Class" + '\n')
    f2.write("Id" + ',' + "Class" + '\n')
    splitfolders()
    labels_id, labels_class = load_labels()

    train_path_dir = 'images/train/malware'
    test_path_dir = 'images/val/malware'
    train_file_list = os.listdir(train_path_dir)
    test_file_list = os.listdir(test_path_dir)

    for f in train_file_list:
        #print(f.rsplit('.')[0])
        for index, id in enumerate(labels_id):
            if f.rsplit('.')[0] == id:
                f1.write(f.rsplit('.')[0] + ',' + str(labels_class[index]) + '\n')

    for f in test_file_list:
        #print(f.rsplit('.')[0])
        for index, id in enumerate(labels_id):
            if f.rsplit('.')[0] == id:
                f2.write(f.rsplit('.')[0] + ',' + str(labels_class[index]) + '\n')


    f1.close()
    f2.close()
